<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="main.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui" >


    <ui:define name="content">
        <h:form id="form">

            <div id="main" role="main">


                <div id="content">

                    <section id="widget-grid" class="">
                        <div class="row">
                            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <div class="widget-body">
                                    <p:growl id="growl" showDetail="true" autoUpdate="true"   />  
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
                                            <h1 class="page-title txt-color-blueDark">

                                                <!-- PAGE HEADER -->
                                                <i class="fa-fw fa fa-tasks "></i> 
                                                #{msg['perfiles.titulo']}
                                                <span>>  
                                                    Factura Electr√≥nica
                                                </span>
                                            </h1>
                                        </div>
                                    </div>
                                    <p:commandButton  value="#{msg['boton.nuevo']}" styleClass="btn btn-success" actionListener="#{perfilesBean.nuevo}" process="@this" update=":form:nombre" />


                                    <br/> <br/> 
                                    <p:dataTable  id="dt" value="#{perfilesBean.perfilModel}" var="obj" selection="#{perfilesBean.selectedPerfil}"
                                                  rows="8" rowsPerPageTemplate="8,10,15"  paginator="true" filteredValue="#{perfilesBean.filterPerfiles}" selectionMode="single" >

                                        <p:column style="width: 70%" sortBy="nombrePerfil" headerText="#{msg['perfiles.tabla.columna1']}"  filterMatchMode="contains" >
                                            <h:outputText value="#{obj.nombrePerfil}"/>
                                        </p:column>
                                        <p:column  style="width: 70px" styleClass="centrado">
                                            <p:commandButton value="#{msg['boton.editar']}" styleClass="btn btn-info" action="#{perfilesBean.editar}" process="@this" update=":form:nombre" >
                                                <f:setPropertyActionListener value="#{obj}" target="#{perfilesBean.selectedPerfil}"  />  
                                            </p:commandButton>

                                        </p:column>
                                        <p:column style="width: 85px" styleClass="centrado">
                                            <p:commandButton value="#{msg['boton.eliminar']}" styleClass="btn btn-warning" action="#{perfilesBean.eliminar}" process="@this" update="@([id$=dlgConfirm])" >
                                                <f:setPropertyActionListener value="#{obj}" target="#{perfilesBean.selectedPerfil}" />  

                                            </p:commandButton>
                                        </p:column>

                                    </p:dataTable>


                                    <p:dialog id="dlgEditar"  widgetVar="ventanaEditar" header="#{msg['perfiles.header.editar']}" width="370px" height="60px" resizable="false">
                                       
                                            <table style="companyHeaderGrid">
                                                <tr>
                                                    <td>#{msg['perfiles.editar.nombre']}</td>
                                                    <td><p:inputText id="nombre" styleClass="form-control"  value="#{perfilesBean.nombre}" style="width:190px" required="true"  requiredMessage="#{msg['perfiles.editar.nombre.mensaje']}" /></td>
                                                </tr>
                                            </table>
                                       

                                        <f:facet name="footer">
                                            <p:commandButton  id="aceptar" value="#{msg['boton.aceptar']}"  styleClass="btn btn-primary" action="#{perfilesBean.registrar}" update="@([id$=dt]) @([id$=pnlGrid)"  />
                                            &#160;<p:commandButton value="#{msg['boton.cancelar']}" styleClass="btn btn-danger"   action="#{perfilesBean.cancelar}" process="@this" update="@([id$=pnlGrid)" />

                                        </f:facet>
                                    </p:dialog>
                                    
                                    <p:dialog id="dlgConfirm" header="#{msg['title.eliminar']}" widgetVar="confirm"   showEffect="fade" hideEffect="explode" width="350" height="50"  >


                                        <h:outputText value="#{msg['perfiles.eliminar']}"/>
                                        <h:outputText style="font-weight:  bold" id="lblNombre" value="#{perfilesBean.selectedPerfil.nombrePerfil}"/>

                                        <f:facet name="footer">
                                            <p:commandButton value="#{msg['boton.si']}"  styleClass="btn btn-success"  actionListener="#{perfilesBean.desactivar}" update="@([id$=dt])"  />
                                            <p:commandButton value="#{msg['boton.no']}" styleClass="btn btn-danger"  onclick="PF('confirm').hide()"/> 	

                                        </f:facet>
                                    </p:dialog>

                                </div>
                            </article>


                        </div>
                    </section> 
                </div>


            </div>
        </h:form>

    </ui:define>

</ui:composition>
